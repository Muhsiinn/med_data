{% extends "base.html" %}

{% block page_title %}Edit Entry{% endblock %}

{% block content %}
<form method="POST">
    <div class="form-row">
        {% for field_name, field_config in fields.items() %}
            {% if field_config.type != 'textarea' %}
            <div class="form-group">
                <label for="{{ field_name }}">
                    {{ field_config.label }}
                    {% if field_config.required %}<span class="required">*</span>{% endif %}
                </label>
                <input
                    type="{{ field_config.type }}"
                    id="{{ field_name }}"
                    name="{{ field_name }}"
                    value="{{ entry[field_name] if entry[field_name] is not none else '' }}"
                    {% if field_config.min is not none %}min="{{ field_config.min }}"{% endif %}
                    {% if field_config.max is not none %}max="{{ field_config.max }}"{% endif %}
                    {% if field_config.required %}required{% endif %}>
            </div>
            {% endif %}
        {% endfor %}
    </div>

    {% for field_name, field_config in fields.items() %}
        {% if field_config.type == 'textarea' %}
        <div class="form-group">
            <label for="{{ field_name }}">
                {{ field_config.label }}
                {% if field_config.required %}<span class="required">*</span>{% endif %}
            </label>
            <textarea
                id="{{ field_name }}"
                name="{{ field_name }}"
                rows="4"
                {% if field_config.required %}required{% endif %}>{{ entry[field_name] if entry[field_name] is not none else '' }}</textarea>
        </div>
        {% endif %}
    {% endfor %}

    <div class="actions">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
